<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ä¸€èµ·å†™ä¸€ä¸ªnpmå‘½ä»¤è¡Œå·¥å…· Â· å°å®‹</title><meta name="description" content="ä¸€èµ·å†™ä¸€ä¸ªnpmå‘½ä»¤è¡Œå·¥å…· - rwson"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="å°å®‹"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/rwson" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ä¸€èµ·å†™ä¸€ä¸ªnpmå‘½ä»¤è¡Œå·¥å…·</h1><div class="post-info">Nov 20, 2016</div><div class="post-content"><p>è‡ªä»nodejsé—®ä¸–ä¹‹åï¼Œéšç€å‰ç«¯ä¸æ–­çš„å‘å±•ï¼Œå‡ºç°è¿‡å¾ˆå¤šçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå°±æ¯”å¦‚å‰ç«¯æ„å»ºå·¥å…·ï¼Œä»æœ€å¼€å§‹çš„<code>grunt</code>ï¼Œå†åˆ°<code>gulp</code>ï¼Œç„¶ååˆ°ç°åœ¨çš„<code>webpack</code>ç­‰ç­‰ï¼Œå®ƒä»¬éƒ½æœ‰è‡ªå·±çš„å‘½ä»¤è¡Œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·åˆ†æå¹¶å®ç°ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·</p>
<p>é¦–å…ˆéœ€è¦å»ºä¸€ä¸ªç›®å½•ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æš‚ä¸”å«<code>cli-starter</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir cli-starter</div></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬éœ€è¦å»ç”¨<code>npm</code>åˆå§‹åŒ–è¿™ä¸ªç›®å½•ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨é»˜è®¤çš„å°±å¥½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm init -y</div></pre></td></tr></table></figure>
<p>æ™®é€šçš„ node.js è„šæœ¬éœ€è¦ä½¿ç”¨<code>node æ–‡ä»¶å</code>çš„å½¢å¼æ‰§è¡Œï¼Œåœ¨è„šæœ¬é¦–è¡ŒåŠ ä¸Š<code>#!/usr/bin/env node</code>å¯ä»¥åœ¨<code>linux</code>ç¯å¢ƒä¸­æŒ‡å®šè„šæœ¬çš„è§£é‡Šç¨‹åº</p>
<p>ä¸€åˆ‡ä»<code>hello world</code>å¼€å§‹ï¼Œæˆ‘ä»¬ç°åœ¨æ–°å»ºä¸€ä¸ª<code>bin</code>ç›®å½•ï¼Œåœ¨ä¸‹é¢ç”¨å»ºä¸€ä¸ª<code>hello.js</code>ï¼Œå†™å…¥ä¸‹é¢å†…å®¹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/env node</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"hello world"</span>);</div></pre></td></tr></table></figure>
<p>ç„¶åå»<code>node ./bin/hello</code>ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°ä¼šè¾“å‡º<code>hello world</code></p>
<p>å½“ç„¶è¿™ä¸ªåªæ˜¯åœ¨ç‰¹å®šç›®å½•ä¸‹å»æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæƒ³å’Œå…¶ä»–å‘½ä»¤è¡Œå·¥å…·åšåˆ°æ— å¤„ä¸åœ¨ï¼Œå¯ä»¥åœ¨<code>package.json</code>ä¸­åšå¦‚ä¸‹æŒ‡å®š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>: <span class="string">"hello"</span>,</div><div class="line">  <span class="attr">"bin"</span>: &#123;</div><div class="line">    <span class="attr">"hello"</span>: <span class="string">"./bin/hello"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åå†é€šè¿‡<code>npm link</code>å»æ·»åŠ åˆ°ç³»ç»Ÿ<code>PATH</code>ï¼Œä¸è¦æ‹…å¿ƒä¼šæ±¡æŸ“ç³»ç»Ÿï¼Œæ—¢ç„¶æœ‰<code>npm link</code>ï¼Œè‚¯å®šå°±æœ‰<code>npm unlink</code>ï¼Œå°±æ˜¯æŠŠæˆ‘ä»¬æ·»åŠ çš„åˆ é™¤ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªç›®å½•ä¸‹ä½¿ç”¨è¿™ä¸ª<code>hello</code>å‘½ä»¤äº†</p>
<p>ä¸Šé¢å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„å‘½ä»¤è¡Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¯¹å®ƒè¿›è¡Œå®Œå–„ï¼Œæœ€å¸¸è§çš„å°±æ˜¯å‚æ•°ï¼Œæœ‰å¾ˆå¤š<code>npm</code>æ¨¡å—å¯ä»¥è§£ææˆ‘ä»¬ä¼ å…¥çš„å‚æ•°ï¼Œå¸¸ç”¨çš„æœ‰<a href="https://www.npmjs.com/package/commander" target="_blank" rel="external">commander</a>ã€<a href="https://www.npmjs.com/package/minimist" target="_blank" rel="external">minimist</a>ç­‰</p>
<p>åœ¨è¿™é‡Œæˆ‘ç”¨çš„<code>minimist</code>è¿™ä¸ªæ¨¡å—ï¼Œç”¨æ³•<code>npm</code>ä¸Šå·²ç»æœ‰äº†è¿™é‡Œä¸å†èµ˜è¿°ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·å®Œæˆä¸€ä¸ªç¿»è¯‘å°å·¥å…·ï¼Œè°ƒç”¨è°·æ­Œçš„ç¿»è¯‘æ¥å£ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ç”¨çš„<code>translate-api</code>è¿™ä¸ª<code>npm</code>åŒ…,ä¸€èµ·çœ‹ä¸‹å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/env node</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> minimist = <span class="built_in">require</span>(<span class="string">"minimist"</span>),</div><div class="line">    translate = <span class="built_in">require</span>(<span class="string">"translate-api"</span>);</div><div class="line"></div><div class="line"><span class="comment">//	è·å–å‚æ•°</span></div><div class="line"><span class="keyword">var</span> args = minimist((process.argv.slice(<span class="number">2</span>)), &#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     *  å‚æ•°åˆ«å</div><div class="line">     * hello --target=abc &lt;=&gt; hello -t=abc</div><div class="line">     */</div><div class="line">    alias: &#123;</div><div class="line">        <span class="attr">t</span>: <span class="string">"target"</span>,</div><div class="line">        <span class="attr">i</span>: <span class="string">"input"</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">//	å­˜å‚¨è¾“å…¥çš„å‚æ•°</span></div><div class="line"><span class="keyword">var</span> target = args.target,</div><div class="line">    input = args.input;</div><div class="line"></div><div class="line"><span class="comment">//	è°ƒç”¨å°è£…å¥½çš„Google Translate API</span></div><div class="line">translate.getText(input, &#123; <span class="attr">to</span>: target &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(res.text);</div><div class="line">	<span class="comment">//	é€€å‡ºè¿›ç¨‹</span></div><div class="line">    process.exit(<span class="number">1</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œæˆ‘ä»¬ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·å°±å†™å¥½äº†ï¼Œåªæ˜¯ä¸€ä¸ªå°ç©å…·ï¼Œè¿˜æœ‰å¾ˆå¤šæ²¡å®ç°ï¼Œæ¯”å¦‚å­å‘½ä»¤ç­‰ã€‚</p>
<p>é‚£ä¹ˆå¦‚æœæ„Ÿè§‰è¿™ä¸ªå·¥å…·å†™çš„è¿˜è¡Œï¼Œæƒ³åˆ†äº«åˆ°<code>npm</code>ä»“åº“é‡Œé¢ç»™æ›´å¤šäººä½¿ç”¨ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±è¦ç”¨åˆ°<code>npm</code>çš„ä¸€äº›å­å‘½ä»¤äº†ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ç”¨<code>npm adduser</code>å»ç™»å½•<code>npm</code>ï¼Œè®©å®ƒçŸ¥é“è¿™ä¸ªåŒ…æ˜¯è°å‘å¸ƒçš„ï¼Œç„¶åç”¨<code>npm publish</code>å»æ¨é€åˆ°ä»“åº“ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å‘å¸ƒ<code>npm</code>åŒ…æ—¶æˆ‘ä»¬éœ€è¦æŠŠé•œåƒæºåˆ‡æ¢æˆå®˜æ–¹çš„ï¼Œæ¨èä½¿ç”¨<a href="https://www.npmjs.com/package/nrm" target="_blank" rel="external">nrm</a>å»ç®¡ç†é•œåƒï¼Œåœ¨ç”¨<code>publish</code>ä¹‹å‰ï¼Œå…ˆ<code>nrm use npm</code>åˆ‡ä¸‹é•œåƒï¼Œç­‰å‘å¸ƒæˆåŠŸä¹‹ååˆ«äººå°±å¯ä»¥ç”¨<code>npm install &lt;package-name&gt; -g</code>å»æŠŠæˆ‘ä»¬çš„å‘½ä»¤è¡Œå·¥å…·å®‰è£…åˆ°å…¨å±€ä½¿ç”¨å•¦ğŸ˜œ</p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/11/29/2016-11-29-gulp-plugin-tourial/" class="prev">PREV</a><a href="/2016/11/09/2016-11-09-async:await-tourial/" class="next">NEXT</a></div><div class="copyright"><p>Â© 2015 - 2017 <a href="http://yoursite.com">rwson</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>